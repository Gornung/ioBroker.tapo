{
  "version": 3,
  "sources": ["../../../src/lib/utils/l520e.ts"],
  "sourcesContent": ["import L510E from \"./l510e\";\nimport { ColorTempLightSysinfo } from \"./types\";\n\nexport default class L520E extends L510E {\n\n  private _colorTempSysInfo!:ColorTempLightSysinfo;\n\n  constructor(\n    public readonly log: any,\n    public readonly ipAddress: string,\n    public readonly email: string,\n    public readonly password: string,\n    public readonly timeout: number,\n  ) {\n    super(log, ipAddress, email, password, timeout);\n    this.log.debug('Constructing L510E on host: ' + ipAddress);\n  }\n\n  async getDeviceInfo(force?:boolean): Promise<ColorTempLightSysinfo>{\n    return super.getDeviceInfo(force).then(() => {\n      return this.getSysInfo();\n    });\n  }\n\n  async setColorTemp(color_temp:number):Promise<boolean>{\n    const transformedColorTemp = this.transformColorTemp(color_temp);\n    this.log.debug('Color Temp Tapo :' + transformedColorTemp);\n\n    const roundedValue = transformedColorTemp > 6500 ? 6500 : transformedColorTemp < 2500 ? \n      2500 : transformedColorTemp;\n\n    const payload = '{'+\n              '\"method\": \"set_device_info\",'+\n              '\"params\": {'+\n                  '\"hue\": 0,' +\n                  '\"saturation\": 0,' +\n                  '\"color_temp\": ' + roundedValue +\n                  '},'+\n                  '\"requestTimeMils\": ' + Math.round(Date.now() * 1000) + ''+\n                  '};';\n\n    return this.sendRequest(payload);\n  }\n\n  private transformColorTemp(value: number):number{\n    return Math.floor(1000000 / value);\n  }\n\n  async getColorTemp(): Promise<number>{\n    return super.getDeviceInfo().then(() => {\n      return this.calculateColorTemp(this.getSysInfo().color_temp);\n    });\n  }\n\n  calculateColorTemp(tapo_color_temp:number):number{\n    const newValue = this.transformColorTemp(tapo_color_temp);\n    return newValue > 400 ? 400 : (newValue < 154 ? 154 : newValue);\n  }\n\n  protected setSysInfo(sysInfo:ColorTempLightSysinfo){\n    this._colorTempSysInfo = sysInfo;\n    this._colorTempSysInfo.last_update = Date.now();\n  }\n\n  public getSysInfo():ColorTempLightSysinfo{\n    return this._colorTempSysInfo;\n  }\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAGlB,MAAO,cAA4B,aAAAA,QAAM;AAAA,EAIvC,YACkB,KACA,WACA,OACA,UACA,SAChB;AACA,UAAM,KAAK,WAAW,OAAO,UAAU,OAAO;AAN9B;AACA;AACA;AACA;AACA;AAGhB,SAAK,IAAI,MAAM,iCAAiC,SAAS;AAAA,EAC3D;AAAA,EAEA,MAAM,cAAc,OAA+C;AACjE,WAAO,MAAM,cAAc,KAAK,EAAE,KAAK,MAAM;AAC3C,aAAO,KAAK,WAAW;AAAA,IACzB,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,aAAa,YAAmC;AACpD,UAAM,uBAAuB,KAAK,mBAAmB,UAAU;AAC/D,SAAK,IAAI,MAAM,sBAAsB,oBAAoB;AAEzD,UAAM,eAAe,uBAAuB,OAAO,OAAO,uBAAuB,OAC/E,OAAO;AAET,UAAM,UAAU,oFAKiB,eACnB,0BACwB,KAAK,MAAM,KAAK,IAAI,IAAI,GAAI,IACpD;AAEd,WAAO,KAAK,YAAY,OAAO;AAAA,EACjC;AAAA,EAEQ,mBAAmB,OAAqB;AAC9C,WAAO,KAAK,MAAM,MAAU,KAAK;AAAA,EACnC;AAAA,EAEA,MAAM,eAA+B;AACnC,WAAO,MAAM,cAAc,EAAE,KAAK,MAAM;AACtC,aAAO,KAAK,mBAAmB,KAAK,WAAW,EAAE,UAAU;AAAA,IAC7D,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,iBAA8B;AAC/C,UAAM,WAAW,KAAK,mBAAmB,eAAe;AACxD,WAAO,WAAW,MAAM,MAAO,WAAW,MAAM,MAAM;AAAA,EACxD;AAAA,EAEU,WAAW,SAA8B;AACjD,SAAK,oBAAoB;AACzB,SAAK,kBAAkB,cAAc,KAAK,IAAI;AAAA,EAChD;AAAA,EAEO,aAAkC;AACvC,WAAO,KAAK;AAAA,EACd;AACF;",
  "names": ["L510E"]
}
