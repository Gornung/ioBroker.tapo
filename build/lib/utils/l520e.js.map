{
  "version": 3,
  "sources": ["../../../src/lib/utils/l520e.ts"],
  "sourcesContent": ["import L510E from \"./l510e\";\nimport { ColorTempLightSysinfo } from \"./types\";\n\nexport default class L520E extends L510E {\n  private _colorTempSysInfo!: ColorTempLightSysinfo;\n\n  constructor(\n    public readonly log: any,\n    public readonly ipAddress: string,\n    public readonly email: string,\n    public readonly password: string,\n    public readonly timeout: number,\n  ) {\n    super(log, ipAddress, email, password, timeout);\n    this.log.debug(\"Constructing L510E on host: \" + ipAddress);\n  }\n\n  async getDeviceInfo(): Promise<ColorTempLightSysinfo> {\n    return super.getDeviceInfo().then(() => {\n      return this.getSysInfo();\n    });\n  }\n\n  async setColorTemp(color_temp: number): Promise<true> {\n    const transformedColorTemp = this.transformColorTemp(color_temp);\n    this.log.debug(\"Color Temp Tapo :\" + transformedColorTemp);\n\n    const roundedValue = transformedColorTemp > 6500 ? 6500 : transformedColorTemp < 2500 ? 2500 : transformedColorTemp;\n\n    const payload =\n      \"{\" +\n      '\"method\": \"set_device_info\",' +\n      '\"params\": {' +\n      '\"hue\": 0,' +\n      '\"saturation\": 0,' +\n      '\"color_temp\": ' +\n      roundedValue +\n      \"},\" +\n      '\"requestTimeMils\": ' +\n      Math.round(Date.now() * 1000) +\n      \"\" +\n      \"};\";\n\n    return this.handleRequest(payload).then(() => {\n      return true;\n    });\n  }\n\n  private transformColorTemp(value: number) {\n    return Math.floor(1000000 / value);\n  }\n\n  async getColorTemp(): Promise<number> {\n    return super.getDeviceInfo().then(() => {\n      return this.calculateColorTemp(this.getSysInfo().color_temp);\n    });\n  }\n\n  calculateColorTemp(tapo_color_temp: number) {\n    const newValue = this.transformColorTemp(tapo_color_temp);\n    return newValue > 400 ? 400 : newValue < 154 ? 154 : newValue;\n  }\n\n  protected setSysInfo(sysInfo: ColorTempLightSysinfo) {\n    this._colorTempSysInfo = sysInfo;\n    this._colorTempSysInfo.last_update = Date.now();\n  }\n\n  public getSysInfo(): ColorTempLightSysinfo {\n    return this._colorTempSysInfo;\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAGlB,MAAO,cAA4B,aAAAA,QAAM;AAAA,EAGvC,YACkB,KACA,WACA,OACA,UACA,SAChB;AACA,UAAM,KAAK,WAAW,OAAO,UAAU,OAAO;AAN9B;AACA;AACA;AACA;AACA;AAGhB,SAAK,IAAI,MAAM,iCAAiC,SAAS;AAAA,EAC3D;AAAA,EAEA,MAAM,gBAAgD;AACpD,WAAO,MAAM,cAAc,EAAE,KAAK,MAAM;AACtC,aAAO,KAAK,WAAW;AAAA,IACzB,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,aAAa,YAAmC;AACpD,UAAM,uBAAuB,KAAK,mBAAmB,UAAU;AAC/D,SAAK,IAAI,MAAM,sBAAsB,oBAAoB;AAEzD,UAAM,eAAe,uBAAuB,OAAO,OAAO,uBAAuB,OAAO,OAAO;AAE/F,UAAM,UACJ,oFAMA,eACA,0BAEA,KAAK,MAAM,KAAK,IAAI,IAAI,GAAI,IAE5B;AAEF,WAAO,KAAK,cAAc,OAAO,EAAE,KAAK,MAAM;AAC5C,aAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEQ,mBAAmB,OAAe;AACxC,WAAO,KAAK,MAAM,MAAU,KAAK;AAAA,EACnC;AAAA,EAEA,MAAM,eAAgC;AACpC,WAAO,MAAM,cAAc,EAAE,KAAK,MAAM;AACtC,aAAO,KAAK,mBAAmB,KAAK,WAAW,EAAE,UAAU;AAAA,IAC7D,CAAC;AAAA,EACH;AAAA,EAEA,mBAAmB,iBAAyB;AAC1C,UAAM,WAAW,KAAK,mBAAmB,eAAe;AACxD,WAAO,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM;AAAA,EACvD;AAAA,EAEU,WAAW,SAAgC;AACnD,SAAK,oBAAoB;AACzB,SAAK,kBAAkB,cAAc,KAAK,IAAI;AAAA,EAChD;AAAA,EAEO,aAAoC;AACzC,WAAO,KAAK;AAAA,EACd;AACF;",
  "names": ["L510E"]
}
