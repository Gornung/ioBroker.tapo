{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\n * Created with @iobroker/create-adapter v2.1.1\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\nimport * as utils from \"@iobroker/adapter-core\";\nimport axios, { AxiosInstance } from \"axios\";\nimport crypto from \"crypto\";\nimport https from \"https\";\nimport Json2iob from \"./lib/json2iob\";\nimport P100 from \"./lib/utils/p100\";\n\nclass Tapo extends utils.Adapter {\n  private devices: { [key: string]: any };\n  private deviceObjects: { [key: string]: any };\n  private json2iob: Json2iob;\n  private secret: Buffer;\n  private requestClient: AxiosInstance;\n  updateInterval: any = null;\n  reLoginTimeout: any = null;\n  refreshTokenTimeout: any = null;\n  session: any = {};\n  p100: P100;\n  refreshTimeout: any;\n  refreshTokenInterval: any;\n  public constructor(options: Partial<utils.AdapterOptions> = {}) {\n    super({\n      ...options,\n      name: \"tapo\",\n    });\n    this.on(\"ready\", this.onReady.bind(this));\n    this.on(\"stateChange\", this.onStateChange.bind(this));\n    this.on(\"unload\", this.onUnload.bind(this));\n    this.devices = {};\n    this.deviceObjects = {};\n    this.json2iob = new Json2iob(this);\n    this.requestClient = axios.create({\n      httpsAgent: new https.Agent({\n        rejectUnauthorized: false,\n      }),\n    });\n    this.secret = Buffer.from([\n      54, 101, 100, 55, 100, 57, 55, 102, 51, 101, 55, 51, 52, 54, 55, 102, 56, 97, 53, 98, 97, 98, 57, 48, 98, 53, 55,\n      55, 98, 97, 52, 99,\n    ]);\n  }\n\n  /**\n   * Is called when databases are connected and adapter received configuration.\n   */\n  private async onReady(): Promise<void> {\n    this.setState(\"info.connection\", false, true);\n    if (this.config.interval < 0.5) {\n      this.log.info(\"Set interval to minimum 0.5\");\n      this.config.interval = 0.5;\n    }\n    if (!this.config.username || !this.config.password) {\n      this.log.error(\"Please set username and password in the instance settings\");\n      return;\n    }\n\n    this.updateInterval = null;\n    this.reLoginTimeout = null;\n    this.refreshTokenTimeout = null;\n    this.session = {};\n    this.subscribeStates(\"*\");\n\n    this.log.info(\"Login tp TAPO App\");\n    await this.login();\n    if (this.session.token) {\n      await this.getDeviceList();\n      // await this.updateDevices();\n      this.updateInterval = setInterval(async () => {\n        //  await this.updateDevices();\n      }, this.config.interval * 60 * 1000);\n    }\n  }\n  async login(): Promise<void> {\n    const body = JSON.stringify({\n      appVersion: \"2.8.21\",\n      refreshTokenNeeded: true,\n      platform: \"iOS 14.8\",\n      cloudPassword: this.config.password,\n      terminalUUID: \"CDE6601E-148C-4CB7-831F-FD587E999D99\",\n      cloudUserName: this.config.username,\n      terminalName: \"iPhone\",\n      terminalMeta: \"3\",\n      appType: \"TP-Link_Tapo_iOS\",\n    });\n    const md5 = crypto.createHash(\"md5\").update(body).digest(\"base64\");\n    this.log.debug(md5);\n    const content = md5 + \"\\n9999999999\\nfee66616-58dd-4bcb-be79-fe092d800a21\\n/api/v2/account/login\";\n    const signature = crypto.createHmac(\"sha1\", this.secret).update(content).digest(\"hex\");\n    await this.requestClient({\n      method: \"post\",\n      url: \"https://n-wap-gw.tplinkcloud.com/api/v2/account/login?termID=CDE6601E-148C-4CB7-831F-FD587E954C69&appVer=2.8.21&locale=de_DE&appName=TP-Link_Tapo_iOS&netType=wifi&model=iPhone10%2C5&termName=iPhone&termMeta=3&brand=TPLINK&ospf=iOS%2014.8\",\n      headers: {\n        \"Content-Type\": \"application/json;UTF-8\",\n        Accept: \"*/*\",\n        \"User-Agent\": \"Tapo/2.8.21 (iPhone; iOS 14.8; Scale/3.00)\",\n        \"Accept-Language\": \"de-DE;q=1, uk-DE;q=0.9, en-DE;q=0.8\",\n        \"X-Authorization\":\n          \"Timestamp=9999999999, Nonce=fee66616-58dd-4bcb-be79-fe092d800a21, AccessKey=4d11b6b9d5ea4d19a829adbb9714b057, Signature=\" +\n          signature,\n      },\n      data: body,\n    })\n      .then((res) => {\n        this.log.debug(JSON.stringify(res.data));\n        if (res.data.error_code) {\n          this.log.error(JSON.stringify(res.data));\n          return;\n        }\n        this.setState(\"info.connection\", true, true);\n        this.session = res.data.result;\n      })\n      .catch((error) => {\n        this.log.error(error);\n        error.response && this.log.error(JSON.stringify(error.response.data));\n      });\n  }\n\n  async getDeviceList(): Promise<void> {\n    const body =\n      '{\"index\":0,\"deviceTypeList\":[\"SMART.TAPOBULB\",\"SMART.TAPOPLUG\",\"SMART.IPCAMERA\",\"SMART.TAPOHUB\",\"SMART.TAPOSENSOR\",\"SMART.TAPOSWITCH\"],\"limit\":20}';\n    const md5 = crypto.createHash(\"md5\").update(body).digest(\"base64\");\n    this.log.debug(md5);\n    const content = md5 + \"\\n9999999999\\nfee66616-58dd-4bcb-be79-fe092d800a21\\n/api/v2/common/getDeviceListByPage\";\n    const signature = crypto.createHmac(\"sha1\", this.secret).update(content).digest(\"hex\");\n    await this.requestClient({\n      method: \"post\",\n      url: `https://n-euw1-wap-gw.tplinkcloud.com/api/v2/common/getDeviceListByPage?token=${this.session.token}&termID=CDE6601E-148C-4CB7-831F-FD587E954C69&appVer=2.8.21&locale=de_DE&appName=TP-Link_Tapo_iOS&netType=wifi&model=iPhone10%2C5&termName=iPhone&termMeta=3&brand=TPLINK&ospf=iOS%2014.8`,\n      headers: {\n        \"Content-Type\": \"application/json;UTF-8\",\n        \"Content-MD5\": md5,\n        Accept: \"*/*\",\n        \"User-Agent\": \"Tapo/2.8.21 (iPhone; iOS 14.8; Scale/3.00)\",\n        \"Accept-Language\": \"de-DE;q=1, uk-DE;q=0.9, en-DE;q=0.8\",\n        \"X-Authorization\":\n          \"Timestamp=9999999999, Nonce=fee66616-58dd-4bcb-be79-fe092d800a21, AccessKey=4d11b6b9d5ea4d19a829adbb9714b057, Signature=\" +\n          signature,\n      },\n      data: body,\n    })\n      .then(async (res) => {\n        this.log.debug(JSON.stringify(res.data));\n        if (res.data.error_code) {\n          this.log.error(JSON.stringify(res.data));\n          return;\n        }\n        this.log.info(`Found ${res.data.result?.totalNum} devices`);\n        for (const device of res.data.result?.deviceList) {\n          const id = device.deviceId;\n          this.devices[id] = device;\n          const name = Buffer.from(device.alias, \"base64\").toString(\"utf8\");\n\n          await this.setObjectNotExistsAsync(id, {\n            type: \"device\",\n            common: {\n              name: name,\n            },\n            native: {},\n          });\n          //   await this.setObjectNotExistsAsync(id + \".remote\", {\n          //     type: \"channel\",\n          //     common: {\n          //       name: \"Remote Controls\",\n          //     },\n          //     native: {},\n          //   });\n\n          //   const remoteArray = [{ command: \"Refresh\", name: \"True = Refresh\" }];\n          //   remoteArray.forEach((remote) => {\n          //     this.setObjectNotExists(id + \".remote.\" + remote.command, {\n          //       type: \"state\",\n          //       common: {\n          //         name: remote.name || \"\",\n          //         type: remote.type || \"boolean\",\n          //         role: remote.role || \"boolean\",\n          //         def: remote.def || false,\n          //         write: true,\n          //         read: true,\n          //       },\n          //       native: {},\n          //     });\n          //   });\n          this.json2iob.parse(id, device);\n          if (device.status === 1) {\n            const body = `{\"requestData\":{\"method\":\"get_device_info\",\"terminalUUID\":\"01D6B18A-5514-4C9F-B49C-555E775591B2\"},\"deviceId\":\"${id}\"}`;\n            const md5 = crypto.createHash(\"md5\").update(body).digest(\"base64\");\n            this.log.debug(md5);\n            const content = md5 + \"\\n9999999999\\nfee66616-58dd-4bcb-be79-fe092d800a21\\n/api/v2/common/passthrough\";\n            const signature = crypto.createHmac(\"sha1\", this.secret).update(content).digest(\"hex\");\n            await this.requestClient({\n              method: \"post\",\n              url: `https://n-euw1-wap-gw.tplinkcloud.com/api/v2/common/passthrough?token=${this.session.token}&termID=CDE6601E-148C-4CB7-831F-FD587E954C69&appVer=2.8.21&locale=de_DE&appName=TP-Link_Tapo_iOS&netType=wifi&model=iPhone10%2C5&termName=iPhone&termMeta=3&brand=TPLINK&ospf=iOS%2014.8`,\n              headers: {\n                \"Content-Type\": \"application/json;UTF-8\",\n                \"Content-MD5\": md5,\n                Accept: \"*/*\",\n                \"User-Agent\": \"Tapo/2.8.21 (iPhone; iOS 14.8; Scale/3.00)\",\n                \"Accept-Language\": \"de-DE;q=1, uk-DE;q=0.9, en-DE;q=0.8\",\n                \"X-Authorization\":\n                  \"Timestamp=9999999999, Nonce=fee66616-58dd-4bcb-be79-fe092d800a21, AccessKey=4d11b6b9d5ea4d19a829adbb9714b057, Signature=\" +\n                  signature,\n              },\n              data: body,\n            })\n              .then(async (res) => {\n                this.log.debug(JSON.stringify(res.data));\n\n                if (res.data.error_code) {\n                  this.log.error(JSON.stringify(res.data));\n                  return;\n                }\n                const result = res.data.result?.responseData?.result;\n                this.devices[id] = { ...this.devices[id], result };\n                if (result.ip) {\n                  this.initDevice(id);\n                }\n                this.json2iob.parse(id, result);\n              })\n              .catch((error) => {\n                this.log.error(error);\n                error.response && this.log.error(JSON.stringify(error.response.data));\n              });\n          }\n        }\n      })\n      .catch((error) => {\n        this.log.error(error);\n        error.response && this.log.error(JSON.stringify(error.response.data));\n      });\n  }\n  async initDevice(id: string): Promise<void> {\n    const device = this.devices[id];\n    if (device.deviceName === \"P100\") {\n      this.p100 = new P100(this.log, device.ip, this.config.username, this.config.password, 2);\n      this.deviceObjects[id] = this.p100;\n      this.p100\n        .handshake()\n        .then(() => {\n          this.p100\n            .login()\n            .then(() => {\n              this.p100\n                .getDeviceInfo()\n                .then((sysInfo) => {\n                  const interval = this.config.interval ? this.config.interval * 1000 : 30000;\n                  this.log.debug(\"interval: \" + interval);\n\n                  setTimeout(() => {\n                    // this.updateState(interval);\n                  }, interval);\n                })\n                .catch(() => {\n                  this.log.error(\"52 - Get Device Info failed\");\n                });\n            })\n            .catch(() => {\n              this.log.error(\"Login failed\");\n            });\n        })\n        .catch(() => {\n          this.log.error(\"Handshake failed\");\n        });\n    }\n  }\n\n  async updateDevices(): Promise<void> {\n    const statusArray = [\n      {\n        path: \"status\",\n        url: \"\",\n        desc: \"Status\",\n      },\n    ];\n\n    for (const element of statusArray) {\n      // const url = element.url.replace(\"$id\", id);\n\n      await this.requestClient({\n        method: element.method || \"get\",\n        url: element.url,\n        headers: {},\n      })\n        .then(async (res) => {\n          this.log.debug(JSON.stringify(res.data));\n          if (!res.data) {\n            return;\n          }\n          const data = res.data;\n\n          const forceIndex = true;\n          const preferedArrayName = null;\n\n          this.json2iob.parse(element.path, data, {\n            forceIndex: forceIndex,\n            preferedArrayName: preferedArrayName,\n            channelName: element.desc,\n          });\n          await this.setObjectNotExistsAsync(element.path + \".json\", {\n            type: \"state\",\n            common: {\n              name: \"Raw JSON\",\n              write: false,\n              read: true,\n              type: \"string\",\n              role: \"json\",\n            },\n            native: {},\n          });\n          this.setState(element.path + \".json\", JSON.stringify(data), true);\n        })\n        .catch((error) => {\n          if (error.response) {\n            if (error.response.status === 401) {\n              error.response && this.log.debug(JSON.stringify(error.response.data));\n              this.log.info(element.path + \" receive 401 error. Refresh Token in 60 seconds\");\n              this.refreshTokenTimeout && clearTimeout(this.refreshTokenTimeout);\n              this.refreshTokenTimeout = setTimeout(() => {\n                this.refreshToken();\n              }, 1000 * 60);\n\n              return;\n            }\n          }\n          this.log.error(element.url);\n          this.log.error(error);\n          error.response && this.log.error(JSON.stringify(error.response.data));\n        });\n    }\n  }\n\n  async refreshToken(): Promise<void> {\n    this.log.debug(\"Refresh token\");\n  }\n  /**\n   * Is called when adapter shuts down - callback has to be called under any circumstances!\n   */\n  private onUnload(callback: () => void): void {\n    try {\n      this.setState(\"info.connection\", false, true);\n      this.refreshTimeout && clearTimeout(this.refreshTimeout);\n      this.reLoginTimeout && clearTimeout(this.reLoginTimeout);\n      this.refreshTokenTimeout && clearTimeout(this.refreshTokenTimeout);\n      this.updateInterval && clearInterval(this.updateInterval);\n      this.refreshTokenInterval && clearInterval(this.refreshTokenInterval);\n\n      callback();\n    } catch (e) {\n      callback();\n    }\n  }\n\n  /**\n   * Is called if a subscribed state changes\n   */\n  private onStateChange(id: string, state: ioBroker.State | null | undefined): void {\n    if (state) {\n      if (!state.ack) {\n        const deviceId = id.split(\".\")[2];\n        const command = id.split(\".\")[4];\n        if (id.split(\".\")[3] !== \"remote\") {\n          return;\n        }\n\n        if (command === \"Refresh\") {\n          this.updateDevices();\n          return;\n        }\n      }\n    }\n  }\n}\n\nif (require.main !== module) {\n  // Export the constructor in compact mode\n  module.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Tapo(options);\n} else {\n  // otherwise start the instance directly\n  (() => new Tapo())();\n}\n"],
  "mappings": "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",
  "names": ["Json2iob", "axios", "https", "crypto", "body", "md5", "content", "signature", "res", "_a", "_b", "P100"]
}
